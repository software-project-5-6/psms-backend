# =========================================================
# SERVER CONFIGURATION
# =========================================================
server.port=8080
spring.application.name=backend

# =========================================================
# DATABASE CONFIGURATION (MySQL)
# =========================================================
# spring.datasource.url=jdbc:mysql://localhost:3306/psms_db?createDatabaseIfNotExist=true&useSSL=false&allowPublicKeyRetrieval=true
# spring.datasource.username=root
# spring.datasource.password=Dimuthu14!
# spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# DATABASE CONFIGURATION (PostGre SQL)
# =========================================================
spring.datasource.url=${DB_URL}
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver
spring.ai.vectorstore.pgvector.initialize-schema=true
spring.ai.vectorstore.pgvector.dimensions=768

# JPA / Hibernate
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# =========================================================
# AWS COGNITO CONFIGURATION
# =========================================================
aws.cognito.region=${COGNITO_REGION}
aws.cognito.user-pool-id=${COGNITO_USER_POOL_ID}
aws.cognito.client-id=${COGNITO_CLIENT_ID}
aws.cognito.domain=${COGNITO_DOMAIN}
aws.cognito.jwk-url=${COGNITO_JWK_URL}

# =========================================================
# ? SPRING SECURITY (JWT RESOURCE SERVER)
# =========================================================
spring.security.oauth2.resourceserver.jwt.issuer-uri=${COGNITO_ISSUER_URI}


# =========================================================
# ? LOGGING CONFIGURATION
# =========================================================
logging.level.root=INFO
logging.level.org.springframework.web=INFO
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
logging.level.com.Majstro.psmsbackend=DEBUG

# =========================================================
# ? SWAGGER / OPENAPI (Springdoc + PKCE + Cognito Integration)
# =========================================================
springdoc.api-docs.enabled=true
springdoc.swagger-ui.enabled=true
springdoc.swagger-ui.path=/swagger-ui.html

# OAuth2 client config for Swagger (PKCE Flow)
springdoc.swagger-ui.oauth.client-id=${COGNITO_CLIENT_ID}
springdoc.swagger-ui.oauth.use-pkce-with-authorization-code-grant=true
springdoc.swagger-ui.oauth2-redirect-url=http://localhost:8080/swagger-ui/oauth2-redirect.html
springdoc.swagger-ui.oauth.scopes=openid email profile aws.cognito.signin.user.admin
#springdoc.swagger-ui.oauth.additional-query-string-params.response_type=code id_token token


# =========================================================
# ? DEVTOOLS (Optional - Auto Restart)
# =========================================================
spring.devtools.restart.enabled=true
spring.devtools.livereload.enabled=true


# ===============================
#  SPRING MAIL CONFIG (GMAIL SMTP)
# ===============================

spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=${MAIL_USERNAME}
spring.mail.password=${MAIL_PASSWORD}

# Enable authentication and TLS
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# Optional: debug logs (helpful during setup)
spring.mail.properties.mail.debug=true

# ===============================
#  FRONTEND CONFIGURATION
# ===============================
app.frontend.url=${FRONTEND_URL:http://localhost:5173}



# =======================================
#  Artifact storage local configurations
# =======================================
file.upload.base-path=storage/projects
spring.servlet.multipart.max-file-size=100MB
spring.servlet.multipart.max-request-size=100MB

# =========================================================
# OLLAMA CONFIGURATION
# =========================================================
spring.ai.ollama.base-url=${OLLAMA_BASE_URL}
spring.ai.ollama.embedding.options.model=${OLLAMA_EMBED_MODEL}




# =========================================================
# GROQ API Key and Endpoint Configuration
# =========================================================
spring.ai.openai.api-key=${GROQ_API_KEY}
spring.ai.openai.base-url=${GROQ_BASE_URL}
spring.ai.openai.chat.options.model=${GROQ_MODEL}